{% extends 'appEball/base_with_grey_background.html' %}
{% load static %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'appEball/css/tournament_info.css' %}">
{% endblock %}

{% block title %}
    Tournament
{% endblock %}

{% block content2 %}    
    <div class="row">
        <div class="col">
            <h2>{{tournament.name}}</h2>
        </div>
        <div class="col" style="margin-top: -1%">
            {% if tournament.user == user and tournament.gRound == 0 and teams|length >= 2 %}
                <div class="col">
                    <a class="btn rounded-pill float-right"  href="{% url 'appEball:generate_games' tournament.pk %}" id='pageBtn'>Generate Games</a>
                    
                </div>
            {% endif %}


        </div>
        <div class="col" align='center'>
                <form method="post">
                        {% csrf_token %}
                        {% if inTeam != True %}
                        <button class="btn rounded-pill" type="submit" href="" id='pageBtn' name="submit" >Join as Reserve</button>
                        {% endif %}
                </form>
        </div>
    </div>

    <div class="content">
        {% if gRound > 0 and tournament.gRound != 0  %}
            <div class="row" style="margin-top: 1%;">
                <div class="col">
                    {% if gRound > 1 %}
                        <a class="float-right" href="{% url 'appEball:change_round' tournament.pk gRound less %}">
                            <img src="{% static 'appEball/assets/left_arrow.png' %}" alt="">
                        </a>
                    {% endif %}
                </div>
                <div class="col-sm-3" align='center'>
                    <p class="title">Round {{ gRound }}</p>
                </div>
                <div class="col">
                    {% if maxRound > gRound %}
                        <a class="float-left" href="{% url 'appEball:change_round' tournament.pk gRound plus %}">
                            <img src="{% static 'appEball/assets/right_arrow.png' %}" alt="">
                        </a>
                    {% endif %}
                </div>
            </div>
            {% for game in games %}
                <div class="row disp" id="{{ game.0 }}" align='center'>
                    <div class="col" align='right'>
                        <p class="team">{{ game.1.team1.name }} </p>
                    </div>
                    <div class="col-sm-4" align='center'>
                        <p class="center">{{ game.1.slot.date|date:'d-m-Y, H:m' }}, {{ game.1.slot.field.name }} </p>
                    </div>
                    <div class="col" align='left'>
                        <p class="team">{{ game.1.team2.name }} </p>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="row" style="margin-top: 1%;">
                <div class="col" align='center'>
                    <p class="title">Game days</p>
                </div>
            </div> 
            {% for day in days %}
                <div class="row" id="{{ day.0 }}" align='center'>
                    <div class="col" align='center'>
                        <p class="details" id="details">{{ day.2 }}, {{day.1.start|date:'H:i'}} - {{day.1.end|date:'H:i'}}, {{ day.1.field.name }}</p>
                    </div>
                </div>
            {% endfor %}
        {% endif %}   
        {% if gRound == 0 or tournament.gRound == 0 %}
            <div class="row" style="margin-top: 2%;">
                <div class="col" align='center'>
                    <p class="title">Teams</p>
                </div>
            </div>
            <div class="row min" id="row2">
                <div class="col-sm-2">
                    <div class="row">
                        <div class="col" align='center'>
                            <p class="subtopRow">Teams</p>
                        </div>
                    </div>
                </div>
                <div class="col-sm-7">
                    <div class="row">
                        <div class="col"  align='center'>
                            <p class="subtopRow">Tatic</p>
                        </div>
                        <div class="col"  align='center'>
                            <p class="subtopRow" >Goalkeeper</p>
                        </div>
                        <div class="col"  align='center'>
                            <p class="subtopRow" >Defender</p>
                        </div>
                        <div class="col"  align='center'>
                            <p class="subtopRow" >Midfielder</p>
                        </div>
                        <div class="col"  align='center'>
                            <p class="subtopRow" >Forward</p>
                        </div>
                        <div class="col"  align='center'>
                            <p class="subtopRow" >Striker</p>
                        </div>
                    </div>
                </div>
            </div>
            {% for team in teams %}
                <div class="row" id={{ team.0 }}>
                    <div class="col-sm-2">
                        <div class="row">
                            <div class="col"  align='center'>
                                <p class="topRow" id="Midfielder">{{ team.1.name }}</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-7">
                        <div class="row">
                            <div class="col" align='center'>
                                <p class="topRow" id="tatic">{{ team.1.tactic.name }}</p>
                            </div>
                            <div class="col"  align='center'>
                                <p class="topRow" id="Goalkeeper" >{{ team.1.availGK }}</p>
                            </div>

                            <div class="col"  align='center'>
                                <p class="topRow" id="Goalkeeper" >{{ team.1.availDF }}</p>
                            </div>
                            <div class="col"  align='center'>
                                <p class="topRow" id="Midfielder">{{ team.1.availMF }}</p>
                            </div>
                            <div class="col"  align='center'>
                                <p class="topRow" id="Forward">{{ team.1.availFW }}</p>
                            </div>
                            <div class="col"  align='center'>
                                <p class="topRow" id="Striker">{{ team.1.availST }}</p>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="row">
                                {% if tournament.user == user %}
                                    <div class="col" align='center'>
                                        <a class="btn rounded-pill" href="{% url 'appEball:delete_team' team.1.pk %}" id='pageBtn' >Kick Team</a>
                                    </div>
                                {% endif %}
                                <div class="col" align='center'>
                                    <a class="btn rounded-pill"  href="{% url 'appEball:team_info' team.1.pk %}" id='pageBtn'>Join Team</a>
                                </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="row space" style="margin-top: 2%;">
                <div class="col" align='center'>
                    <p class="title">Leader Board</p>
                </div>
            </div>
            <div class="row min" id="row2">
                <div class="col-sm-2">
                    <div class="row">
                        <div class="col"  align='center'>
                            <p class="subtopRow">Teams</p>
                        </div>
                    </div>
                </div>
                <div class="col-sm-7">
                    <div class="row">
                        <div class="col" align='center'>
                            <p class="subtopRow">Points</p>
                        </div>
                        <div class="col"  align='center'>
                            <p class="subtopRow">Played</p>
                        </div>
                        <div class="col"  align='center'>
                            <p class="subtopRow" >Won</p>
                        </div>
                        <div class="col"  align='center'>
                            <p class="subtopRow" >Drawn</p>
                        </div>
                        <div class="col"  align='center'>
                            <p class="subtopRow" >Lost</p>
                        </div>
                        <div class="col"  align='center'>
                            <p class="subtopRow" >GF</p>
                        </div>
                        <div class="col"  align='center'>
                            <p class="subtopRow" >GA</p>
                        </div>
                        <div class="col"  align='center'>
                            <p class="subtopRow" >GD</p>
                        </div>
                    </div>
                </div>
            </div>
            {% for team in teams %}
                <div class="row" id={{ team.0 }}>
                    <div class="col-sm-2">
                        <div class="row">
                            <div class="col"  align='center'>
                                <p class="topRow">{{ team.1.name }}</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-7">
                        <div class="row">
                            <div class="col"  align='center'>
                                <p class="topRow">{{ team.1.points }}</p>
                            </div>
                            <div class="col"  align='center'>
                                <p class="topRow">{{ team.1.played }}</p>
                            </div>
                            <div class="col"  align='center'>
                                <p class="topRow">{{ team.1.won }}</p>
                            </div>
                            <div class="col"  align='center'>
                                <p class="topRow" id="Midfielder">{{ team.1.drawn }}</p>
                            </div>
                            <div class="col"  align='center'>
                                <p class="topRow" id="Midfielder">{{ team.1.lost }}</p>
                            </div>
                            <div class="col"  align='center'>
                                <p class="topRow" id="Forward">{{ team.1.goalsFor }}</p>
                            </div>
                            <div class="col"  align='center'>
                                <p class="topRow" id="Striker">{{ team.1.goalsAgainst }}</p>
                            </div>
                            <div class="col"  align='center'>
                                <p class="topRow" id="Goalkeeper" >{{ team.1.goalsDif }}</p>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="row">
                            {% if tournament.user == user %}
                                <div class="col" align='center'>
                                    <button class="btn rounded-pill" type="submit" id="pageBtn">Kick Team</button>
                                </div>
                            {% endif %}
                            <div class="col" align='center'>
                                <a class="btn rounded-pill"  href="{% url 'appEball:team_info' team.1.pk %}" id='pageBtn'>Join Team</a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% endif %}    
    </div>

{% endblock %}


